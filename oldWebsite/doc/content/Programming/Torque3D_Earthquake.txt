<font color="#13B7FD" size="15"><b>Torque 3D</b></font><br>
<br>
<br><font color="#cccccc" size="11"><b>Earthquake Method</b></font>
<br>
//===========================================================================<br>
//<br>
//! \file   Quake<br>
//! \brief  This program simulates an Earthquake by randomly changing the x <br>
//          and the y coordinates. <br>
//<br>
//===========================================================================<br>
function Quake(%shape, %duration) <br>
{<br>
	%lx = getword(%shape.getTransform(), 0); //get the current transform values<br>
	%ly = getword(%shape.getTransform(), 1);<br>
	%lz = getword(%shape.getTransform(), 2);<br>
	%rx = getword(%shape.getTransform(), 3);<br>
	%ry = getword(%shape.getTransform(), 4);<br>
	%rz = getword(%shape.getTransform(), 5);<br>
	%rd = getword(%shape.getTransform(), 6);<br>
	//loop through the earthquake for %duration (cycles)<br>
	if(%duration > 0)<br>
	{			<br>
		%shape.setTransform(%lx SPC %ly SPC %lz SPC %rx SPC %ry SPC %rz SPC %rd );<br>
		%MINMAX = 1; //used to generate numbers<br>
		%Num = GetRandom(-%MINMAX,%MINMAX); //generating random nuber<br>
		%lx += %Num;//setting the result<br>
		%ly += %Num;<br>
				//moving the building<br>
		%shape.setTransform(%lx SPC %ly SPC %lz SPC %rx SPC %ry SPC %rz SPC %rd );<br>
		schedule(70, 0, Quake, %shape, (%duration-1));<br>
	}//end if  <br>
	else <br>
	{<br>
		%shape.setTransform($lxConst SPC $lyConst SPC $lzConst SPC $rxConst SPC $ryConst SPC $rzConst SPC $rdConst );<br>
		echo ("Quake: done.");<br>
	}  	<br>
}<br>
<br>